
# Strings

- [Strings](#strings)
  - [Task1: Многострочный текст](#task1-многострочный-текст)
    - [Task1.1: Переменная определелена глобально](#task11-переменная-определелена-глобально)
    - [Task1.2: Переменная определена внутри блока](#task12-переменная-определена-внутри-блока)
  - [Task2: Преобразовании числа в строку](#task2-преобразовании-числа-в-строку)
  - [Task3: Работа с байтовой последовательностью](#task3-работа-с-байтовой-последовательностью)
    - [Task3.1: Преобразование в utf-8](#task31-преобразование-в-utf-8)
    - [Task3.2: Возврат каретки (CR)](#task32-возврат-каретки-cr)
    - [Task3.3: Пробельные символы](#task33-пробельные-символы)
  - [Task4: Форматирование строк](#task4-форматирование-строк)
    - [Task4.1: Простейший шаблон](#task41-простейший-шаблон)
    - [Task4.2: Преобразование в двоичную систему - 1](#task42-преобразование-в-двоичную-систему---1)
    - [Task4.3: Преобразование в двоичную систему - 2](#task43-преобразование-в-двоичную-систему---2)
    - [Task4.4: Преобразование в двоичную систему - 3](#task44-преобразование-в-двоичную-систему---3)
    - [Task4.5: RTP запись](#task45-rtp-запись)
    - [Task4.5: Доработка задания по числам](#task45-доработка-задания-по-числам)
    - [Task4.6: Удаление символов в строке](#task46-удаление-символов-в-строке)
    - [Task4.7: Нормализация имен интерфейсов](#task47-нормализация-имен-интерфейсов)

## Task1: Многострочный текст

Записать текст конфигурации в переменную `config`.

```bash
#
bridge-domain 555
 vlan 555 access-port interface 10GE1/0/1 to 10GE1/0/48
 vxlan vni 10555
 #
 evpn
  route-distinguisher 192.168.43.34:10555
  vpn-target 64512:10555 export-extcommunity
  vpn-target 64512:10555 import-extcommunity
 arp broadcast-suppress enable
#
```

### Task1.1: Переменная определелена глобально

```python

config = """

#
bridge-domain 555
 vlan 555 access-port interface 10GE1/0/1 to 10GE1/0/48
 vxlan vni 10555
 #
 evpn
  route-distinguisher 192.168.43.34:10555
  vpn-target 64512:10555 export-extcommunity
  vpn-target 64512:10555 import-extcommunity
 arp broadcast-suppress enable
#
 
"""

```

### Task1.2: Переменная определена внутри блока

```python

from textwrap import dedent

if True:
    config = dedent("""

    #
    bridge-domain 555
     vlan 555 access-port interface 10GE1/0/1 to 10GE1/0/48
     vxlan vni 10555
     #
     evpn
      route-distinguisher 192.168.43.34:10555
      vpn-target 64512:10555 export-extcommunity
      vpn-target 64512:10555 import-extcommunity
     arp broadcast-suppress enable
    #
 
    """)

```

## Task2: Преобразовании числа в строку

Перевести число в строку минимум 3 способами

```python
bd_id = 555

bd_id_str1 = str(bd_id)
bd_id_str2 = '{0}'.format(bd_id)
bd_id_str3 = f"{bd_id}"
```

## Task3: Работа с байтовой последовательностью

### Task3.1: Преобразование в utf-8

С оборудования получили следующий вывод, нужно преобразовать его в unicode (utf-8) строку.

```python
output = b"\r\nHuawei Versatile Routing Platform Software\r\nVRP (R) software, Version 8.220 (CE6857EI V200R022C00SPC500)\r\nCopyright (C) 2012-2022 Huawei Technologies Co., Ltd.\r\nHUAWEI CE6857-48S6CQ-EI uptime is 248 days, 3 hours, 14 minutes\r\n"

s = output.decode('UTF8')

```

### Task3.2: Возврат каретки (CR)

У полученной в Task3.1 строки избавится от символа возврата каретки.

```python
s1 = s.replace("\n", "")

```

### Task3.3: Пробельные символы

У полученной в Task3.2 строки удалить пробельные символы только с начала строки.

```python
s2 = s1.lstrip()
```


## Task4: Форматирование строк

### Task4.1: Простейший шаблон

Сделать из текста

```bash
#
bridge-domain 555
 vlan 555 access-port interface 10GE1/0/1 to 10GE1/0/48
 vxlan vni 10555
 #
 evpn
  route-distinguisher 192.168.43.34:10555
  vpn-target 64512:10555 export-extcommunity
  vpn-target 64512:10555 import-extcommunity
 arp broadcast-suppress enable
#
```

шаблон со следующими входными параметрами (название переменной / описание / пример значения в шаблоне)

- `bd_id` / bridge domain id / 555
- `intf_start` / первый интерфейс / 10GE1/0/1
- `intf_end` / последний интерфейс / 10GE1/0/48
- `rid` / router id / 192.168.43.34
- `bgp_as` / номер bgp as / 64512

> Последние два байта в rd/rt и значение vxlan vni и формируются присоединением слева символа 1 (один) к значению bd_id. Если длина bd_id меньше 4 символов, то перед конкатенацией с 1 нужно bd_id дополнить нулями слева до 4 символов. Например (bd_id > result) 555 > 10555, 2345 > 12345, 4 > 10004

Восстановить исходный текст из шаблона, передав в него необходимые параметры:

```python

bd_id = '555'
intf_start =  '10GE1/0/1'
intf_end = '10GE1/0/48'
rid = '192.168.43.34'
bgp_as = '64512'
rd = '1'+bd_id.zfill(4)


template = dedent(f'''

#
bridge-domain {bd_id}
 vlan {bd_id} access-port interface {intf_start} to {intf_end}
 vxlan vni {rd}
 #
 evpn
  route-distinguisher {rid}:{rd}
  vpn-target {bgp_as}:{rd} export-extcommunity
  vpn-target {bgp_as}:{rd} import-extcommunity
 arp broadcast-suppress enable
#
''')

```

Получить конфигурацию для еще двух наборов параметров (меняем только `bd_id`, остальные можно оставить без изменений) и убедиться, что rd/rt/vni формируются без ошибок

- `bd_id` = 2541. Ожидаем в vni/rt/rf - 12541
  
```python

bd_id = '2541'
intf_start =  '10GE1/0/1'
intf_end = '10GE1/0/48'
rid = '192.168.43.34'
bgp_as = '64512'
rd = '1'+bd_id.zfill(4)


template1 = dedent(f'''

#
bridge-domain {bd_id}
 vlan {bd_id} access-port interface {intf_start} to {intf_end}
 vxlan vni {rd}
 #
 evpn
  route-distinguisher {rid}:{rd}
  vpn-target {bgp_as}:{rd} export-extcommunity
  vpn-target {bgp_as}:{rd} import-extcommunity
 arp broadcast-suppress enable
#
''')

```

- `bd_id` = 84. Ожидаем в vni/rt/rf - 10084

```python

bd_id = '84'
intf_start =  '10GE1/0/1'
intf_end = '10GE1/0/48'
rid = '192.168.43.34'
bgp_as = '64512'
rd = '1'+bd_id.zfill(4)


template2 = dedent(f'''

#
bridge-domain {bd_id}
 vlan {bd_id} access-port interface {intf_start} to {intf_end}
 vxlan vni {rd}
 #
 evpn
  route-distinguisher {rid}:{rd}
  vpn-target {bgp_as}:{rd} export-extcommunity
  vpn-target {bgp_as}:{rd} import-extcommunity
 arp broadcast-suppress enable
#
''')

```

### Task4.2: Преобразование в двоичную систему - 1

Сделать преобразование в двоичную систему **без** использования функции `bin()` трех чисел:

- 42
- 32
- 255

```python
format(42, 'b')

format(32, 'b')

format(255, 'b')
```

### Task4.3: Преобразование в двоичную систему - 2

Сделать преобразование в двоичную систему **без** использования функции `bin()` трех чисел (42/32/255 из прошлого задания), дополнив при этом количество бит до 8 нулями слева (11 -> 00001011).

```python
format(42, 'b').zfill(8)

format(32, 'b').zfill(8)

format(255, 'b').zfill(8)
```

### Task4.4: Преобразование в двоичную систему - 3

Получить полное двоичное представление ip адреса (т.е. без разделения на октеты): 10.23.43.234 -> 00001010000101110010101111101010.

```python

ip = "10.23.43.234"

ip_bin = ''.join([format(int(o), 'b').zfill(8) for o in ip.split('.')])

```

### Task4.5: RTP запись

Сформировать RTP запись для адреса "77.88.55.242" -> "242.55.88.77.in-addr.arpa"

```python
ip = "77.88.55.242"


s = ip[::-1] + '.in-addr.arpa'

```

### Task4.5: Доработка [задания по числам](/998.hw.tasks/003.numbers.md#numbers)

Доработать задание по числам таким образом, что бы на вход можно было подавать строку вида "ip / mask". В конце распечатать 5 искомых параметров (network, wildcard, broadcast, min_host_ip, max_host_ip).

```python

s = input('Введите адрес и маску в формате ip/mask: ') # ["192.168.43.54 / 255.255.254.0", "192.168.43.54 / 255.255.255.240"]

dct = dict()



def raw_data(input):
    s = input.split('/')
    addr_lst =[int(i) for i in s[0].split(".")]
    mask_lst = [int(i) for i in s[1].split(".")]

    return addr_lst, mask_lst




def search(address, mask):
    bm = [255, 255, 255, 255]
    network = [address[i]&mask[i] for i in range(len(mask))]  
    broadcast = [network[i]+(bm[i]-mask[i]) for i in range(len(mask))]
    network_s = [str(address[i]&mask[i]) for i in range(len(mask))] 
    broadcast_s = [str(network[i]+(bm[i]-mask[i])) for i in range(len(mask))]
    host_min = [str(network[i]) if i != 3 else str(network[i]+1) for i in range(len(mask))]
    host_max = [str(broadcast[i]) if i != 3 else str(broadcast[i]-1) for i in range(len(mask))]
    wildcard = [str((bm[i]-mask[i])) for i in range(len(mask))]


    

    dct[f'network'] = '.'.join(network_s)
    dct[f'broadcast'] = '.'.join(broadcast_s)
    dct[f'host_min'] = '.'.join(host_min)
    dct[f'host_max'] = '.'.join(host_max)
    dct[f'wildcard'] = '.'.join(wildcard)
    return dct

     
    
addr_lst, mask_lst = raw_data(s)
search(addr_lst, mask_lst)




print(dct)
```

### Task4.6: Удаление символов в строке

С устройства получен вывод

```bash
Local Interface         Exptime(s) Neighbor Interface            Neighbor Device
-------------------------------------------------------------------------------------
100GE1/0/1                    107  100GE1/0/1                    spine1.pod1.stg
10GE1/0/1                     105  10GE1/0/1                     test-server.stg
```

Полностью (вместе с переводом строки) удалить из вывода строку со знаками `-`. При этом фиксировать число/границы удаляемой строки не нужно, вычислем необходимые параметры на основе исходных данных.

```python

istart = output.find('\n')
iend = output.find('100')
s = output[istart+1:iend]
s1 = output.replace(s, '')

```

### Task4.7: Нормализация имен интерфейсов

Даны имена интерфейсов в коротком виде (Eth0/1, GE1/0/2, Тen4/3). Произвести преобразование коротких имен в полные

- Eth0/1 -> Ethernet0/1
- GE1/0/2 -> GigabitEthernet1/0/2
- Тen4/3 -> TenGigabitEthernet4/3

```python

if_name1 = "Eth0/1"
if_name2 = "GE1/0/2"
if_name3 = "Тen4/3"

if_name1 = if_name1.replace('Eth', 'Ethernet')
if_name2 = if_name2.replace('GE', 'GigabitEthernet')
if_name3 = if_name3.replace('Ten', 'TenGigabitEthernet')

```
