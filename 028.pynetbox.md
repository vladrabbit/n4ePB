
# pynetbox

## Task1: Чтение данных из NetBox

Создать аккаунт и токен на [demo netbox](https://demo.netbox.dev/). Используя созданный токен запросить устройства с ролью "router" и распечатать список имен и моделей полученных устройств (список устройств может отличаться, так как это публичный ресурс с RW правами для подьзователей):

```text
name: dmi01-albany-rtr01, model: ISR 1111-8P
name: dmi01-binghamton-rtr01, model: ISR 1111-8P
name: dmi01-buffalo-rtr01, model: ISR 1111-8P
name: dmi01-camden-rtr01, model: ISR 1111-8P
name: dmi01-nashua-rtr01, model: ISR 1111-8P
name: dmi01-pittsfield-rtr01, model: ISR 1111-8P
name: dmi01-rochester-rtr01, model: ISR 1111-8P
name: dmi01-scranton-rtr01, model: ISR 1111-8P
name: dmi01-stamford-rtr01, model: ISR 1111-8P
name: dmi01-utica-rtr01, model: ISR 1111-8P
name: dmi01-yonkers-rtr01, model: ISR 1111-8P
```

## Task2: Создание объекта в NetBox

Написать функцию, которая создает устройство в NetBox:

- принимаемые параметры:
  - имя устройства
  - название роли устройства
  - название сайта
  - название модели устройства
- если устройство, с переданны в качестве аргумента именем, уже есть в NetBox, тогда создание информация об этом пишется в stdout и создание пропускается, возвращается 0
- если указанного а аргументах сайта/модели/роли нет в NetBox, информация об этом пишется в stdout и создание пропускается, возвращается 0
- если устройство создано, информация об этом пишется в stdout и возвращается id созданного устройства

```python
def create_device(name: str, site: str, role: str, model: str) -> int:
    <ваш код>


print(create_device("dmi01-buffalo-rtr01", "DM-Camden", "Router", "ISR 1111-8P"))
# >>> устройство с именем name='dmi01-buffalo-rtr01' уже существует
# >>> 0

print(create_device("dmi01-buffalo-rtr99", "DM-", "Router", "ISR 1111-8P"))
# >>> сайт не существует
# >>> 0

print(create_device("dmi01-buffalo-rtr99", "DM-Camden", "Roiter", "ISR 1111-8P"))
# >>> роль не существует
# >>> 0

print(create_device("dmi01-buffalo-rtr99", "DM-Camden", "Router", "ISR 1111-8Pdd"))
# >>> модель не существует
# >>> 0

print(create_device("dmi01-buffalo-rtr99", "DM-Camden", "Router", "ISR 1111-8P"))
# >>> устройство создано
# >>> 111
```

```python

import pynetbox


nb = pynetbox.api('https://demo.netbox.dev',  token='01f6c4ae8eb2fa549d5ffcb3e9dde124868e422e')


def create_device(device_name, device_role, site_name, device_model, manufacturers_name):

    queried_site =  nb.dcim.sites.get(name=site_name)
    queried_device_role = nb.dcim.device_roles.get(name=device_role)
    queried_device_model = nb.dcim.device_types.get(model=device_model)
    manufacturer = nb.dcim.manufacturers.get(name=manufacturers_name)

        
    if queried_device_role:
        print(f"Device role {device_role} already exists.")
    else:
        constructed_device_role = {"name": device_role, "slug": device_role}
        result = nb.dcim.device_roles.create(constructed_device_role)
        print(result)
        
    if queried_site:
        print(f"Site {site_name} already exists.")
    else:
        constructed_site = {"name": site_name, "slug": site_name}
        result = nb.dcim.sites.create(constructed_site)
        print(result)
        
    if queried_device_model:
        print(f"Device model {device_role} already exists.")
    else:
        constructed_device_model= {"name": device_model, "slug": device_model, "model": device_model, "manufacturer": manufacturer.id}
        result = nb.dcim.device_types.create(constructed_device_model)
        print(result)
    
    queried_site =  nb.dcim.sites.get(name=site_name)
    queried_device = nb.dcim.devices.get(name=device_name)
    queried_device_role = nb.dcim.device_roles.get(name=device_role)
    queried_device_model = nb.dcim.device_types.get(model=device_model)
    manufacturer = nb.dcim.manufacturers.get(name=manufacturers_name)
    
    if queried_device:
        print(f"Device {device_name} already exists.")
    else:
        result = nb.dcim.devices.create(name= device_name, site = queried_site.id, device_type = queried_device_model.id, role = queried_device_role.id)
        print(result)
    
    
    





create_device("sw-1", "access-swith", "test_site", "WS-C2960-24PC-L", "Cisco")
    
    
```
