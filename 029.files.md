
# Файлы

## Task1: Чтение из файла

В текущем каталоге размещен файл `029.config.txt`. Нужно открыть его для чтения и читая построчно выводить на экран содержимое файла. Если строка равна "!", тогда её нужно пропускать (не выводить в stdout).

```python
from pathlib import Path as path


current_file = path(path.cwd(), "029.config.txt")

with open(current_file, "r") as _file:
    for line in _file:
        if not line.strip().startswith("!"): 
            print(line, end = "")

```

## Task2: Сохранение в файл

Есть конфигурация двух устройств в виде словаря со структурой \<hostname\>:\<config\>:

```python
rt01_config = """
!
interface Vlan1
 ip address 192.168.1.1 255.255.255.0
 no shutdown
!
line vty 0 4
 password cisco
!
""".strip()

rt02_config = """
!
router bgp 64512
 bgp router-id 192.168.1.1
 bgp log-neighbor-changes
 !
 address-family ipv4
  redistribute connected route-map LAN
 exit-address-family
 !
 address-family vpnv4 unicast
  neighbor 1.2.3.4 activate
 exit-address-family
!
""".strip()

configs = {
    "rt01": rt01_config,
    "rt02": rt02_config,
}
```

Нужно написать функцию, которая сохраняет конфигурацию каждого устройства в отдельный файл. На вход фунцкция принимает словарь с конфигурациями устройств и название каталога, в который нужно сохранить файл (опционально). Правила сохранения:

- конфигурация каждого устройства сохраняется в отдельный файл
- имя файла формируется как `<hostname>.txt` (ключ словаря + .txt расширение)
- работа с каталогами ведется через библиотеку pathlib
- каталог для сохранения является опциональным параметром
- если каталог не передан в функцию, тогда создается папка `configs` в текущем каталоге (где запущен скрипт) и файлы сохраняются в нем
- если каталог указан:
  - если указан абсолютный путь, тогда создается указанная структура каталогов
  - если указан относительный путь, тогда каталог для сохранения (и все вышестоящие каталоги) создается в текущем каталоге (где запущен скрипт)

```python
from pathlib import Path

rt01_config = """
!
interface Vlan1
 ip address 192.168.1.1 255.255.255.0
 no shutdown
!
line vty 0 4
 password cisco
!
""".strip()

rt02_config = """
!
router bgp 64512
 bgp router-id 192.168.1.1
 bgp log-neighbor-changes
 !
 address-family ipv4
  redistribute connected route-map LAN
 exit-address-family
 !
 address-family vpnv4 unicast
  neighbor 1.2.3.4 activate
 exit-address-family
!
""".strip()

configs = {
    "rt01": rt01_config,
    "rt02": rt02_config,
}




def save_configs(config: dict[str, str], folder: Path = Path("configs")) -> None:
    p = Path(Path.cwd(), folder)
    p.mkdir(parents=True, exist_ok=True)
    for k in config.keys():
        with open(f"{p}/{k}.txt", "w") as _file:
            print(config.get(k), file=_file)
        
    
    
    

save_configs(configs)

```
