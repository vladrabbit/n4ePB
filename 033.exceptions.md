# Exceptions

## Task1: Замена `if/else`

Дан следующий код:

```python
import os

url = os.environ.get("NB_URL")
token = os.environ.get("NB_TOKEN")

nb = pynetbox.api(url=url, token=token)

name = "rt"
device = nb.dcim.devices.get(name=name)
if device is not None:
    device.description = "some new description"
    device.save()
else:
    print(f"устройства с именем {name} не существует")
```

Нужно переписать его с использованием `try/except/else` конструкции. Поведение должно остаться тем же самым:

- если устройства нет, тогда пишем сообщение, что устройства не существут
- если устройство есть - меняем атрибут description

```python

import os
import pynetbox

url = os.environ.get("NB_URL")
token = os.environ.get("NB_TOKEN")

nb = pynetbox.api(url=url, token=token)

name = "rt"
device = nb.dcim.devices.get(name=name)
try:
    device.description = "some new description"
    device.save()
except AttributeError:
    print(f"устройства с именем {name} не существует")

```

## Task2: Проверка данных

В [Task1](/998.hw.tasks/033.exceptions.md#task1-замена-ifelse) выше, после получения url/token из переменных окружения, сделать проверку, что полученные значения не `None`. В противном случае возбудить исключение `ValueError` с текстом "отсутсвуют параметры проключения к серверу".

```python
import os
import pynetbox

try:
    url = os.environ.get("NB_URL")
    token = os.environ.get("NB_TOKEN")

    if token == None or url == None:
        raise ValueError
    
    nb = pynetbox.api(url=url, token=token)
    name = "rt"
    device = nb.dcim.devices.get(name=name)
    
    try:
        device.description = "some new description"
        device.save()
    except AttributeError:
        print(f"устройства с именем {name} не существует")
    
except ValueError:
    print("Отсутсвуют данные для подключения")
    
```